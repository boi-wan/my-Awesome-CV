\ProvidesPackage{awesome-cv-class-overrides}

% ── Read environment variables with a fallback default ──────────────────────
% Usage: \setfromenv{\cmd}{ENV_VAR_NAME}{fallback value}
% Defines \cmd to the value of $ENV_VAR_NAME, or to the fallback if unset.
% Requires --shell-escape (set in the Makefile).
\ExplSyntaxOn
\NewDocumentCommand{\setfromenv}{mmm}{
  \sys_get_shell:nnN { kpsewhich~--var-value~ #2 } {} \l_tmpa_tl
  \tl_trim_spaces:N \l_tmpa_tl
  \tl_if_empty:NTF \l_tmpa_tl
    { \tl_set:Nn \l_tmpa_tl {#3} }
    { }
  \cs_set:Npx #1 { \tl_use:N \l_tmpa_tl }
}
\ExplSyntaxOff

% Change the social information separator from a pipe (|) to something else
\renewcommand{\acvHeaderSocialSep}{\quad\textbar\quad}

\newcommand{\downlink}[1]{\href{#1}{\faDownload}}

% Create a tag
% Usage: \cvtag{<tag label>}
\newcommand{\cvtag}[1]{%
  \tikz[baseline]\node[anchor=base,draw=darkGrey!70,rounded corners=0.5ex,inner xsep=1ex,inner ysep =0.55ex,text height=1.3ex,text depth=.25ex]{\tagstyle{#1}};
}

% https://paletton.com/#uid=7040u0kr3rBgAzDlwtst6lXymh4
\definecolor{tagredfill}{HTML}{FF877B}
\definecolor{tagredtext}{HTML}{880D00}
\definecolor{tagorangefill}{HTML}{FFBB7B}
\definecolor{tagorangetext}{HTML}{884200}
\definecolor{tagbluefill}{HTML}{539BA8}
\definecolor{tagbluetext}{HTML}{024754}

% Color for plain tag borders
\definecolor{darkGrey}{HTML}{555555}

% Tag text styles
\newcommand{\tagstyle}[1]{{\fontsize{7.5pt}{1em}\bodyfontlight\color{darkGrey} #1}}
\newcommand{\tagstylecolor}[2]{{\fontsize{7.5pt}{1em}\bodyfontlight\color{#2} #1}}

% Usage: \cvtag*{<tag label>}
\newcommand{\cvtagred}[1]{\cvtagcolor{#1}{tagredfill}{tagredtext}}
\newcommand{\cvtagorange}[1]{\cvtagcolor{#1}{tagorangefill}{tagorangetext}}
\newcommand{\cvtagblue}[1]{\cvtagcolor{#1}{tagbluefill}{tagbluetext}}

% Usage: \cvtag{<tag label>}{<fill color>}{<text color>}
\newcommand{\cvtagcolor}[3]{%
  \tikz[baseline]\node[anchor=base,fill=#2!50,draw=#2!30,rounded corners=0.5ex,inner xsep=1ex,inner ysep =0.55ex,text height=1.3ex,text depth=.25ex]{\tagstylecolor{#1}{#3}};
}

% Define an environment for cventry
\renewenvironment{cventries}{%
  \vspace{\acvSectionContentTopSkip}
  \begin{center}
}{%
  \end{center}
}
% Define an entry of cv information
% Usage: \cventry{<position>}{<title>}{<location>}{<date>}{<description>}
\renewcommand*{\cventry}[5]{%
  \vspace{-2.0mm}
  \setlength\tabcolsep{0pt}
  \setlength{\extrarowheight}{0pt}
  \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}} L{\textwidth - 4.5cm} R{4.5cm}}
    \ifempty{#2#3}
      {\entrypositionstyle{#1} & \entrydatestyle{#4} \\}
      {\entrytitlestyle{#2} & \entrylocationstyle{#3} \\
      \entrypositionstyle{#1} & \entrydatestyle{#4} \\}
    \multicolumn{2}{L{\textwidth}}{\descriptionstyle{#5}}
  \end{tabular*}%
}

% Define an entry of cv information
% Usage: \cventry{<position>}{<title>}{<location>}{<date>}{<description>}{<value>, <value>}
\newcommand*{\cventrywithtags}[6]{%
  \vspace{2.0mm}
  \setlength\tabcolsep{0pt}
  \setlength{\extrarowheight}{0pt}
  \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}} L{\textwidth - 4.5cm} R{4.5cm}}
    \ifempty{#2#3}
      {\entrypositionstyle{#1} & \entrydatestyle{#4} \\}
      {\entrytitlestyle{#2} & \entrylocationstyle{#3} \\
      \entrypositionstyle{#1} & \entrydatestyle{#4} \\}
    \multicolumn{2}{L{\textwidth}}{\descriptionstyle{#5}}
    \ifthenelse{\equal{#6}{}}{}{\\ \smallskip \footnotesize{\foreach \n in {#6}{\cvtagblue{\n}}}}
  \end{tabular*}%
}


% Define an entry of cv information with double tags
% Usage: \cventrywithdoubletags{<position>}{<title>}{<location>}{<date>}{<description>}{<value>, <value>}{<value>, <value>}
\newcommand*{\cventrywithdoubletags}[7]{%
  \vspace{2.0mm}
  \setlength\tabcolsep{0pt}
  \setlength{\extrarowheight}{0pt}
  \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}} L{\textwidth - 4.5cm} R{4.5cm}}
    \ifempty{#2#3}
      {\entrypositionstyle{#1} & \entrydatestyle{#4} \\}
      {\entrytitlestyle{#2} & \entrylocationstyle{#3} \\
      \entrypositionstyle{#1} & \entrydatestyle{#4} \\}
    \multicolumn{2}{L{\textwidth}}{\descriptionstyle{#5}}
    \ifthenelse{\equal{#6}{}}{}{\\ \smallskip \footnotesize{\foreach \n in {#6}{\cvtagblue{\n}}}}
    \ifthenelse{\equal{#7}{}}{}{\\ \smallskip \footnotesize{\foreach \n in {#7}{\cvtagorange{\n}}}}
  \end{tabular*}%
}


% Define an entry of cv information with short description for the work
% Usage: \cventry{<position>}{<title>}{<location>}{<date>}{<short_description>}{<description>}{<value>, <value>}
\newcommand*{\cventryextendedwithtags}[7]{%
  \vspace{-2.0mm}
  \setlength\tabcolsep{0pt}
  \setlength{\extrarowheight}{0pt}
  \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}} L{\textwidth - 4.5cm} R{4.5cm}}
    \ifempty{#2#3}
      {\entrypositionstyle{#1} & \entrydatestyle{#4} \\}
      {\entrytitlestyle{#2} & \entrylocationstyle{#3} \\
      \entrypositionstyle{#1} & \entrydatestyle{#4} \\}
    \\ \multicolumn{2}{L{\textwidth}}{\descriptionstyle{#5}} \\
    \multicolumn{2}{L{\textwidth}}{\descriptionstyle{#6}}
    \ifthenelse{\equal{#7}{}}{}{\\ \smallskip \footnotesize{\foreach \n in {#7}{\cvtag{\n}}}}
  \end{tabular*}%
}

% Define an entry of cv information with short description for the work
% Usage: \cventry{<position>}{<title>}{<location>}{<date>}{<short_description>}{<description>}{<value>, <value>}{<value>, <value>}
\newcommand*{\cventryextendedwithdoubletags}[8]{%
  \vspace{2.0mm}
  \setlength\tabcolsep{0pt}
  \setlength{\extrarowheight}{0pt}
  \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}} L{\textwidth - 4.5cm} R{4.5cm}}
    \ifempty{#2#3}
      {\entrypositionstyle{#1} & \entrydatestyle{#4} \\}
      {\entrytitlestyle{#2} & \entrylocationstyle{#3} \\
      \entrypositionstyle{#1} & \entrydatestyle{#4} \bigskip \\}
    \multicolumn{2}{L{\textwidth}}{\descriptionstyle{#5}} \\
    \multicolumn{2}{L{\textwidth}}{\descriptionstyle{#6}}
    \ifthenelse{\equal{#7}{}}{}{\\ \smallskip \footnotesize{\foreach \n in {#7}{\cvtagblue{\n}}}}
    \ifthenelse{\equal{#8}{}}{}{\\ \smallskip \footnotesize{\foreach \n in {#8}{\cvtagorange{\n}}}}
  \end{tabular*}%
}

% Define an environment for cvitem (single descriptive block, as opposed to cvitems list)
\newenvironment{cvitem}{%
  \vspace{-4.0mm}
  \begin{justify}
    \setlength{\parskip}{0pt}
}{%
  \end{justify}
  \vspace{1.0mm}
}

